# Notes:
#   - Minimal appveyor.yml file is an empty file. All sections are optional.
#   - Indent each level of configuration with 2 spaces. Do not use tabs!
#   - All section names are case-sensitive.
#   - Section names should be unique on each level.
# version format
version: 1.0.{build}

# scripts that are called at very beginning, before repo cloning
init:
  - git config --global core.autocrlf input
  - SET PATH=c:\php;%PATH%

# enable service required for build/tests
services:
  - mysql               # start MySQL 5.6 service

# scripts that run after cloning repository
install:
  # by default, all script lines are interpreted as batch
  #- echo This is batch
  # to run script as a PowerShell command prepend it with ps:
  #- ps: Write-Host 'This is PowerShell'
  # batch commands start from cmd:
  #- cmd: echo This is batch again
  #- cmd: set MY_VAR=12345
  - cmd: php composer install
  - cmd: php composer require --dev symfony/phpunit-bridge
  - cmd: php bin/console doctrine:schema:create --env=test
  - cmd: php bin/console doctrine:fixtures:load -n --env=test

#---------------------------------#
#       build configuration       #
#---------------------------------#

# build platform, i.e. x86, x64, Any CPU. This setting is optional.
platform: Any CPU

# to add several platforms to build matrix:
#platform:
#  - x86
#  - Any CPU

# build Configuration, i.e. Debug, Release, etc.
configuration: Release

# to add several configurations to build matrix:
#configuration:
#  - Debug
#  - Release

# to run your custom scripts instead of automatic tests
test_script:
  - php vendor\bin\simple-phpunit


